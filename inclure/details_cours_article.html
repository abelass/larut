#SET{date,#ARRAY}
#SET{horaire,#ARRAY}
#SET{prix,#ARRAY}
#SET{lieu,#ARRAY}
<BOUCLE_evenement(EVENEMENTS){id_article}{inscription=1}>
    #SET{date,#GET{date}|array_merge{#ARRAY{#COMPTEUR_BOUCLE,#DATE_DEBUT|unique|affdate_debut_fin{#DATE_FIN,non}}}}
    #SET{h,#DATE_DEBUT|affdate{H:i}|concat{-#DATE_FIN|affdate{H:i}}}
    [(#GET{h}|in_array{#GET{horaire}}|non)#SET{horaire,#GET{horaire}|array_merge{#ARRAY{#COMPTEUR_BOUCLE,#DATE_DEBUT|affdate{H:i}|concat{-#DATE_FIN|affdate{H:i}}}}}]
    #SET{prix_evenement,#ARRAY}
    <BOUCLE_prix(PRIX_OBJETS){id_objet=#ID_EVENEMENT}{objet=evenement}>
            #SET{prix_evenement,#GET{prix_evenement}|array_merge{#ARRAY{#COMPTEUR_BOUCLE,#PRIX}}}
    </BOUCLE_prix>
    #SET{prix,#GET{prix}|array_merge{#ARRAY{#COMPTEUR_BOUCLE,#GET{prix_evenement}}}} 
    </B_prix> 
    
    <BOUCLE_lieu(GIS){id_evenement}{0,1}>
        #SET{lieu_evenement,(#TITRE|concat{&nbsp;- #ADRESSE}|concat{ -&nbsp;#CODE_POSTAL}|concat{&nbsp;#VILLE})}
        #SET{lieu,#GET{lieu}|array_merge{#ARRAY{#COMPTEUR_BOUCLE,#GET{lieu_evenement}}}}         
    </BOUCLE_lieu>
   
</BOUCLE_evenement>

<BOUCLE_prix_art(PRIX_OBJETS){id_objet=#ID_ARTICLE}{objet=article}{si #GET{prix}|count|<{1}}>
        #SET{prix,#GET{prix}|array_merge{#ARRAY{#COMPTEUR_BOUCLE,#PRIX}}}
</BOUCLE_prix_art>
    
    <BOUCLE_lieu_art(GIS){id_article}{0,1}>
        #SET{lieu_evenement,(#TITRE|concat{&nbsp;- #ADRESSE*}|concat{ -&nbsp;#CODE_POSTAL}|concat{&nbsp;#VILLE})}
        #SET{lieu,#GET{lieu}|array_merge{#ARRAY{#COMPTEUR_BOUCLE,#GET{lieu_evenement}}}}         
    </BOUCLE_lieu_art>
   
    <table>
        [<tr>
            <td><:reservation:label_date:></td>
            <td>(#GET{date}|implode{' / '})</td>
        </tr>]
        [<tr>
            <td><:larut:label_horaire:></td>
            <td>(#GET{horaire}|implode{' / '})</td>
        </tr>]
        [<tr>
            <td><:larut:label_prix:></td>
            <td>(#GET{prix}|implode{/})</td>
        </tr>]  
        [<tr>
            <td><:agenda:info_lieu:></td>
            <td>(#GET{lieu}|implode{/})</td>
        </tr>]                                              
    </table>